,ue
init=function(){e=!0
i=!0
r=!1
a=!1
n=!0
t=!1
l=!0
f=!1
s=90
o=70
u=70
c=!0
E=!1
T=12
d=!1
v=0
A=0
S=null
m=null
h=0
p=!1
M=!1
g=getEntityAt(x,y)
sharedB=g
sharedD=0
w=!1
H=life
R=0
if(exists(sharedE))array1=sharedE
else{array1[0]=null
array1[1]=null
array1[2]=null
array1[3]=null
array1[4]=null
array1[5]=null
array1[6]=null
array1[7]=null
array1[8]=null}if(t){array1[3]=g
array1[4]=getX(g)
array1[5]=getY(g)}array1[1]=arenaWidth-1
array1[2]=floor(arenaHeight/2)
sharedE=array1
O=x
N=y
I=T
debugLog(sharedE)}
update=function(){setAttackPriority(CHIP_BOT_CPU)
C()
M=w
w=!1
S=D()
if(!m||!_(m))m=Y()
B()
H=life
G=S
R++
if(S&&canSense(S)){if(c&&L()&&(!d||M))debugLog("TRY ATTACK")
P()
if(!t&&!l){w=!0
U()}}else{if(c)P()
if(!l&&!t){w=!0
k()
if(l&&(!x==O||!y==N))moveTo(O,N)
if(lifePercent<o)F()
X()
debugLog("HOLD STEADY")
if(getDistanceTo(b)>T)pursue(W,Z)}}}
k=function(){if(e&&canActivateSensors()&&!areSensorsActivated()&&1==i)activateSensors()}
D=function(){S=j
if(null===j||V(x,y,z,K)<=5&&!canSense(j)){j=findEntity(ENEMY,ANYTHING,SORT_BY_LIFE,SORT_ASCENDING)
if(exists(j)){z=j.x
K=j.y
q()}S=j}if(canMoveTo(z,K))debugLog("VILLAIN PURSUE")
return S}
Y=function(){return b}
P=function(){if(S){if(canZap()&&getDistanceTo(S)<=2||R<3)zap()
if(willMeleeHit(S))melee(S)
if(willLasersHit(S))fireLasers(S)
if(willMissilesHit(S))fireMissiles(S)
if(willArtilleryHit(S))fireArtillery(S)}if(willMeleeHit())melee()
if(willMissilesHit())fireMissiles()
if(willArtilleryHit())fireArtillery()
if(willLasersHit())fireLasers()}
L=function(){J=V(x,y,z,K)
Q=V(x,y,W,Z)
if(J==Q||canSense(b)){v=0
r=!1
return!0}if(!v||J>=v)return!0
if(!A||J<=A)return!0
else return}
$=function(){ee=findEntities(IS_OWNED_BY_ME,ANYTHING,!1)
ie=filterEntities(ee,[SORT_BY_DISTANCE,SORT_BY_LIFE],[SORT_ASCENDING,SORT_ASCENDING])
if(exists(ie)&&willRepair(ie))repair(ie)
if(willRepair())repair()
if(t&&ie.lifePercent<o)moveTo(ie)}
re=function(){if(!exists(S)||!canSense(S))return!1
if(canTeleport(S))return!0
if(canZap()&&!isZapping()&&isAdjacent(S))return!0
if(willMeleeHit(S))return!0
if(willLasersHit(S))return!0
if(willMissilesHit(S))return!0
if(willArtilleryHit(S))return!0
else return!1}
_=function(){if(!exists(m)||!canSense(m))return!1
if(canTeleport(m))return!0
if(canMoveTo(m))return!0
else return!1}
B=function(){if(!(R<2)){if(life<H&&0==M&&R>2&&!t){R=0
ae()}if(S||life<H||life<=life*(u/100)){H=life
if(isShielded()&&isReflecting())return
if(canShield())shield()
if(canCloak())cloak()
if(canReflect())reflect()}$()}}
U=function(){debugLog("TRYING TO MOVE")
if(lifePercent<o)F()
if(!(0!=x&&x!=ne-1||y!=te-1&&0!=y||t||l))move()
if(!t&&!l&&(r||v&&J<v)){if(S.y>y&&canMove("up"))move("up")
if(S.y<y&&canMove("down"))move("down")
if(S.x>x&&canMove("left"))move("left")
move("right")}if(n&&_()&&getDistanceTo(m)>T&&canMoveTo(m))moveTo(m)
if(E&&m&&getX(m)<=x)move("backward")
if(d&&!M&&isAdjacent(S))move()
if(canTeleport(S)&&J>=2)teleport(S)
X()
if(findClosestEnemyBot())pursue(findClosestEnemyBot())
if(getEntityAt(W,Z)){b=getEntityAt(W,Z)
q()}if(!t&&!l)pursue(W,Z)}
ae=function(){w=!0
if(!1===S)move()
if(S.x>x&&canMove("left"))move("left")
if(S.y<y&&canMove("down"))move("down")
if(S.y>y&&canMove("up"))move("up")
move("right")}
F=function(){if(null!==le)if(V(x,y,fe,se)<=5&&!exists(le)){le=null
fe=null
se=null
q()
debugLog("MEDIC DIED")}else if(1!==V(x,y,fe,se)){debugLog("TO THE DOCTOR")
pursue(fe,se)}}
X=function(){if(null!==S.x)if(V(x,y,z,K)<=5&&!exists(j)){j=null
z=null
K=null
q()
debugLog("NO TARGET FOR "+g)}else if(1!==V(x,y,z,K)){debugLog("GOING FOR TARGET PURSUE")
debugLog(j)
moveTo(z,K)}}
V=function(e,i,r,a){ye=abs(e-r)
oe=abs(i-a)
return ye+oe}
ue=function(){debugLog("naah no init")
if(exists(sharedE))array1=sharedE
if(null==j||null==le){if(findClosestEnemyBot())if(exists(findClosestEnemyBot())){array1[6]=findClosestEnemyBot()
array1[7]=getX(array1[6])
array1[8]=getY(array1[6])}if(t){array1[3]=g
array1[4]=getX(g)
array1[5]=getY(g)}}array1[1]=arenaWidth-1
array1[2]=floor(arenaHeight/2)
sharedE=array1}
q=function(){array1[0]=b
array1[1]=W
array1[2]=Z
array1[3]=le
array1[4]=fe
array1[5]=se
array1[6]=j
array1[7]=z
array1[8]=K
sharedE=array1}
C=function(){if(exists(sharedE)){array1=sharedE
b=array1[0]
W=array1[1]
Z=array1[2]
le=array1[3]
fe=array1[4]
se=array1[5]
j=array1[6]
z=array1[7]
K=array1[8]}}
