init=function(){e=!0
i=!0
r=!1
a=!1
n=!0
t=!1
l=!0
f=!1
s=90
o=70
u=70
c=!0
d=!1
E=12
v=!1
m=0
T=0
p=null
S=null
h=0
g=!1
w=!1
A=getEntityAt(x,y)
sharedB=A
sharedD=0
M=!1
H=life
_=0
if(exists(sharedE))array1=sharedE
else{array1[0]=null
array1[1]=null
array1[2]=null
array1[3]=null
array1[4]=null
array1[5]=null
array1[6]=null
array1[7]=null
array1[8]=null}if(t){array1[3]=A
array1[4]=getX(A)
array1[5]=getY(A)}array1[1]=arenaWidth-1
array1[2]=floor(arenaHeight/2)
sharedE=array1
N=x
C=y
B=E}
update=function(){setAttackPriority(CHIP_BOT_CPU)
I()
w=M
M=!1
p=R()
if(!S||!Y(S))S=D()
O()
H=life
L=p
_++
if(p&&canSense(p)){if(c&&P()&&(!v||w));G()
if(!t&&!l){M=!0
k()}}else{if(c)G()
if(!l&&!t){M=!0
X()
if(l&&(!x==N||!y==C))moveTo(N,C)
if(lifePercent<o)b()
W()
if(getDistanceTo(Z)>E)pursue(j,F)}}}
X=function(){if(e&&canActivateSensors()&&!areSensorsActivated()&&1==i)activateSensors()}
R=function(){p=z
if(null===z||U(x,y,q,J)<=5&&!canSense(z)){z=findEntity(ENEMY,ANYTHING,SORT_BY_LIFE,SORT_ASCENDING)
if(exists(z)){q=z.x
J=z.y
K()}p=z}if(canMoveTo(q,J));return p}
D=function(){return Z}
G=function(){if(p){if(canZap()&&getDistanceTo(p)<=2||_<3)zap()
if(willMeleeHit(p))melee(p)
if(willLasersHit(p))fireLasers(p)
if(willMissilesHit(p))fireMissiles(p)
if(willArtilleryHit(p))fireArtillery(p)}if(willMeleeHit())melee()
if(willMissilesHit())fireMissiles()
if(willArtilleryHit())fireArtillery()
if(willLasersHit())fireLasers()}
P=function(){Q=U(x,y,q,J)
V=U(x,y,j,F)
if(Q==V||canSense(Z)){m=0
r=!1
return!0}if(!m||Q>=m)return!0
if(!T||Q<=T)return!0}
$=function(){ee=findEntities(IS_OWNED_BY_ME,ANYTHING,!1)
ie=filterEntities(ee,[SORT_BY_DISTANCE,SORT_BY_LIFE],[SORT_ASCENDING,SORT_ASCENDING])
if(exists(ie)&&willRepair(ie))repair(ie)
if(willRepair())repair()
if(t&&ie.lifePercent<o)moveTo(ie)}
re=function(){if(!exists(p)||!canSense(p))return!1
if(canTeleport(p))return!0
if(canZap()&&!isZapping()&&isAdjacent(p))return!0
if(willMeleeHit(p))return!0
if(willLasersHit(p))return!0
if(willMissilesHit(p))return!0
if(willArtilleryHit(p))return!0
else return!1}
Y=function(){if(!exists(S)||!canSense(S))return!1
if(canTeleport(S))return!0
if(canMoveTo(S))return!0
else return!1}
O=function(){if(!(_<2)){if(life<H&&0==w&&_>2&&!t){_=0
ae()}if(p||life<H||life<=life*(u/100)){H=life
if(isShielded()&&isReflecting())return
if(canShield())shield()
if(canCloak())cloak()
if(canReflect())reflect()}$()}}
k=function(){if(lifePercent<o)b()
if(!(0!=x&&x!=ne-1||y!=te-1&&0!=y||t||l))move()
if(!t&&!l&&(r||m&&Q<m)){if(p.y>y&&canMove("up"))move("up")
if(p.y<y&&canMove("down"))move("down")
if(p.x>x&&canMove("left"))move("left")
move("right")}if(n&&Y()&&getDistanceTo(S)>E&&canMoveTo(S))moveTo(S)
if(d&&S&&getX(S)<=x)move("backward")
if(v&&!w&&isAdjacent(p))move()
if(canTeleport(p)&&Q>=2)teleport(p)
W()
if(findClosestEnemyBot())pursue(findClosestEnemyBot())
if(getEntityAt(j,F)){Z=getEntityAt(j,F)
K()}if(!t&&!l)pursue(j,F)}
ae=function(){M=!0
if(!1===p)move()
if(p.x>x&&canMove("left"))move("left")
if(p.y<y&&canMove("down"))move("down")
if(p.y>y&&canMove("up"))move("up")
move("right")}
b=function(){if(null!==le)if(U(x,y,fe,se)<=5&&!exists(le)){le=null
fe=null
se=null
K()}else if(1!==U(x,y,fe,se))pursue(fe,se)}
W=function(){if(null!==p.x)if(U(x,y,q,J)<=5&&!exists(z)){z=null
q=null
J=null
K()}else if(1!==U(x,y,q,J))moveTo(q,J)}
U=function(e,i,r,a){ye=abs(e-r)
oe=abs(i-a)
return ye+oe}
ue=function(){if(exists(sharedE))array1=sharedE
if(null==z||null==le){if(findClosestEnemyBot())if(exists(findClosestEnemyBot())){array1[6]=findClosestEnemyBot()
array1[7]=getX(array1[6])
array1[8]=getY(array1[6])}if(t){array1[3]=A
array1[4]=getX(A)
array1[5]=getY(A)}}array1[1]=arenaWidth-1
array1[2]=floor(arenaHeight/2)
sharedE=array1}
K=function(){array1[0]=Z
array1[1]=j
array1[2]=F
array1[3]=le
array1[4]=fe
array1[5]=se
array1[6]=z
array1[7]=q
array1[8]=J
sharedE=array1}
I=function(){if(exists(sharedE)){array1=sharedE
Z=array1[0]
j=array1[1]
F=array1[2]
le=array1[3]
fe=array1[4]
se=array1[5]
z=array1[6]
q=array1[7]
J=array1[8]}}
